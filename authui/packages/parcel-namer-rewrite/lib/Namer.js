"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _plugin = require("@parcel/plugin");

var _Config = require("./Config");

var _logger = require("@parcel/logger");

var _crypto = _interopRequireDefault(require("crypto"));

var _utils = require("@parcel/utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const CONFIG = Symbol.for('parcel-plugin-config'); // noinspection JSUnusedGlobalSymbols

var _default = new _plugin.Namer({
  config: _Config.Config | undefined,
  delegate: null,

  async name(opts) {
    var _opts$bundle$getMainE;

    const config = this.ensureConfig(opts.options.projectRoot, opts.options.packageManager, opts.logger);

    if (!config) {
      return null;
    }

    const disable = config.developmentDisable && opts.options.mode === 'development';
    let nameFromSuper = null;
    const asset = (_opts$bundle$getMainE = opts.bundle.getMainEntry()) !== null && _opts$bundle$getMainE !== void 0 ? _opts$bundle$getMainE : opts.bundle.getEntryAssets()[0];

    if (asset) {
      const assetPath = asset.filePath;
      nameFromSuper = assetPath.substring(assetPath.lastIndexOf("/") + 1);
      const i = nameFromSuper.lastIndexOf(".");

      if (nameFromSuper.substring(i) === ".ts") {
        nameFromSuper = nameFromSuper.substring(0, i) + ".js";
      }
    }

    if (nameFromSuper != null && !disable) {
      return this.rewrite(opts.bundle, opts.bundleGraph, opts.options, nameFromSuper, opts.logger);
    }

    return nameFromSuper;
  },

  ensureConfig(projectRoot, packageManager, logger) {
    if (!this.config) {
      const config = new _Config.Config();
      config.loadFromPackageFolder(projectRoot, logger);

      if (!config.chain) {
        throw Error('No chain namer has been found in project. Set package.json#parcel-namer-rewrite:chain to set a delegate namer ("@parcel/namer-default" by default)');
      }

      const delegatePackage = packageManager.load(config.chain, projectRoot);

      if (!delegatePackage) {
        throw Error(`'Package ${config.delegate}' is not available. Set package.json#parcel-namer-rewrite:chain to set a delegate namer ("@parcel/namer-default" by default)`);
      }

      const delegate = delegatePackage.default[CONFIG];

      if (!delegate) {
        throw Error(`Package '${config.delegate}' has been found, but it's not a namer. Set package.json#parcel-namer-rewrite:chain to set a delegate namer ("@parcel/namer-default" by default)`);
      }

      this.delegate = delegate;
      this.config = config;
    }

    return this.config;
  },

  async rewrite(bundle, bundleGraph, options, superName, logger) {
    const rule = this.config.selectRule(superName);

    if (!rule) {
      return superName;
    }

    let bundleHash = '';

    if (options.mode !== 'development' || this.config.developmentHashing) {
      if (this.config.useParcelHash) {
        bundleHash = bundle.hashReference;
      } else {
        let assets = [];
        bundle.traverseAssets(asset => assets.push(asset));

        let hash = _crypto.default.createHash('md5');

        for (let i = 0; i < assets.length; ++i) {
          const asset = assets[i];

          if (asset.filePath) {
            const fileHash = await (0, _utils.md5FromFilePath)(asset.fs, asset.filePath);
            hash.update([asset.filePath, fileHash].join(':'));
          }
        }

        bundleHash = hash.digest('hex').substr(0, 6);
      }
    } // if we need hashing - remove bundle hash placeholder


    if (bundleHash && bundle.hashReference) {
      superName = superName.replace("." + bundle.hashReference, "");
    }

    const rewrite = superName.replace(rule.test, rule.to).replace(/{(.?)hash(.?)}/, bundleHash.length > 0 ? `$1${bundleHash}$2` : '');
    if (this.config.silent !== true) logger.info({
      message: `Rewrite ${superName} -> ${rewrite}`
    });
    return rewrite;
  }

});

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDT05GSUciLCJTeW1ib2wiLCJmb3IiLCJOYW1lciIsImNvbmZpZyIsIkNvbmZpZyIsInVuZGVmaW5lZCIsImRlbGVnYXRlIiwibmFtZSIsIm9wdHMiLCJlbnN1cmVDb25maWciLCJvcHRpb25zIiwicHJvamVjdFJvb3QiLCJwYWNrYWdlTWFuYWdlciIsImxvZ2dlciIsImRpc2FibGUiLCJkZXZlbG9wbWVudERpc2FibGUiLCJtb2RlIiwibmFtZUZyb21TdXBlciIsImFzc2V0IiwiYnVuZGxlIiwiZ2V0TWFpbkVudHJ5IiwiZ2V0RW50cnlBc3NldHMiLCJhc3NldFBhdGgiLCJmaWxlUGF0aCIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiaSIsInJld3JpdGUiLCJidW5kbGVHcmFwaCIsImxvYWRGcm9tUGFja2FnZUZvbGRlciIsImNoYWluIiwiRXJyb3IiLCJkZWxlZ2F0ZVBhY2thZ2UiLCJsb2FkIiwiZGVmYXVsdCIsInN1cGVyTmFtZSIsInJ1bGUiLCJzZWxlY3RSdWxlIiwiYnVuZGxlSGFzaCIsImRldmVsb3BtZW50SGFzaGluZyIsInVzZVBhcmNlbEhhc2giLCJoYXNoUmVmZXJlbmNlIiwiYXNzZXRzIiwidHJhdmVyc2VBc3NldHMiLCJwdXNoIiwiaGFzaCIsImNyeXB0byIsImNyZWF0ZUhhc2giLCJsZW5ndGgiLCJmaWxlSGFzaCIsIm1kNUZyb21GaWxlUGF0aCIsImZzIiwidXBkYXRlIiwiam9pbiIsImRpZ2VzdCIsInN1YnN0ciIsInJlcGxhY2UiLCJ0ZXN0IiwidG8iLCJzaWxlbnQiLCJpbmZvIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9OYW1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge05hbWVyfSBmcm9tICdAcGFyY2VsL3BsdWdpbic7XG5pbXBvcnQge0NvbmZpZ30gZnJvbSBcIi4vQ29uZmlnXCI7XG5pbXBvcnQge1BsdWdpbkxvZ2dlcn0gZnJvbSAnQHBhcmNlbC9sb2dnZXInO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQge21kNUZyb21GaWxlUGF0aH0gZnJvbSBcIkBwYXJjZWwvdXRpbHNcIjtcblxuY29uc3QgQ09ORklHID0gU3ltYm9sLmZvcigncGFyY2VsLXBsdWdpbi1jb25maWcnKTtcblxuLy8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuZXhwb3J0IGRlZmF1bHQgbmV3IE5hbWVyKHtcbiAgICBjb25maWc6IENvbmZpZyB8IHVuZGVmaW5lZCxcbiAgICBkZWxlZ2F0ZTogbnVsbCxcblxuICAgIGFzeW5jIG5hbWUob3B0czogeyBidW5kbGU6IEJ1bmRsZSwgYnVuZGxlR3JhcGg6IHt9LCBvcHRpb25zOiB7fSwgbG9nZ2VyOiBQbHVnaW5Mb2dnZXIgfSkge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmVuc3VyZUNvbmZpZyhvcHRzLm9wdGlvbnMucHJvamVjdFJvb3QsIG9wdHMub3B0aW9ucy5wYWNrYWdlTWFuYWdlciwgb3B0cy5sb2dnZXIpO1xuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkaXNhYmxlID0gY29uZmlnLmRldmVsb3BtZW50RGlzYWJsZSAmJiBvcHRzLm9wdGlvbnMubW9kZSA9PT0gJ2RldmVsb3BtZW50JztcbiAgICAgICAgbGV0IG5hbWVGcm9tU3VwZXIgPSBudWxsXG4gICAgICAgIFxuICAgICAgICBjb25zdCBhc3NldCA9IG9wdHMuYnVuZGxlLmdldE1haW5FbnRyeSgpID8/IG9wdHMuYnVuZGxlLmdldEVudHJ5QXNzZXRzKClbMF07XG4gICAgICAgIGlmIChhc3NldCkge1xuICAgICAgICAgICAgY29uc3QgYXNzZXRQYXRoID0gYXNzZXQuZmlsZVBhdGg7XG4gICAgICAgICAgICBuYW1lRnJvbVN1cGVyID0gYXNzZXRQYXRoLnN1YnN0cmluZyhhc3NldFBhdGgubGFzdEluZGV4T2YoXCIvXCIpICsgMSlcblxuICAgICAgICAgICAgY29uc3QgaSA9IG5hbWVGcm9tU3VwZXIubGFzdEluZGV4T2YoXCIuXCIpXG4gICAgICAgICAgICBpZiAobmFtZUZyb21TdXBlci5zdWJzdHJpbmcoaSkgPT09IFwiLnRzXCIpIHtcbiAgICAgICAgICAgICAgICBuYW1lRnJvbVN1cGVyID0gbmFtZUZyb21TdXBlci5zdWJzdHJpbmcoMCwgaSkgKyBcIi5qc1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWVGcm9tU3VwZXIgIT0gbnVsbCAmJiAhZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV3cml0ZShvcHRzLmJ1bmRsZSwgb3B0cy5idW5kbGVHcmFwaCwgb3B0cy5vcHRpb25zLCBuYW1lRnJvbVN1cGVyLCBvcHRzLmxvZ2dlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hbWVGcm9tU3VwZXI7XG4gICAgfSxcblxuICAgIGVuc3VyZUNvbmZpZyhwcm9qZWN0Um9vdDogc3RyaW5nLCBwYWNrYWdlTWFuYWdlcjoge30sIGxvZ2dlcjogUGx1Z2luTG9nZ2VyKSB7XG4gICAgICAgIGlmICghdGhpcy5jb25maWcpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBDb25maWcoKTtcbiAgICAgICAgICAgIGNvbmZpZy5sb2FkRnJvbVBhY2thZ2VGb2xkZXIocHJvamVjdFJvb3QsIGxvZ2dlcik7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5jaGFpbikge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdObyBjaGFpbiBuYW1lciBoYXMgYmVlbiBmb3VuZCBpbiBwcm9qZWN0LiBTZXQgcGFja2FnZS5qc29uI3BhcmNlbC1uYW1lci1yZXdyaXRlOmNoYWluIHRvIHNldCBhIGRlbGVnYXRlIG5hbWVyIChcIkBwYXJjZWwvbmFtZXItZGVmYXVsdFwiIGJ5IGRlZmF1bHQpJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRlbGVnYXRlUGFja2FnZSA9IHBhY2thZ2VNYW5hZ2VyLmxvYWQoY29uZmlnLmNoYWluLCBwcm9qZWN0Um9vdCk7XG4gICAgICAgICAgICBpZiAoIWRlbGVnYXRlUGFja2FnZSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGAnUGFja2FnZSAke2NvbmZpZy5kZWxlZ2F0ZX0nIGlzIG5vdCBhdmFpbGFibGUuIFNldCBwYWNrYWdlLmpzb24jcGFyY2VsLW5hbWVyLXJld3JpdGU6Y2hhaW4gdG8gc2V0IGEgZGVsZWdhdGUgbmFtZXIgKFwiQHBhcmNlbC9uYW1lci1kZWZhdWx0XCIgYnkgZGVmYXVsdClgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBkZWxlZ2F0ZVBhY2thZ2UuZGVmYXVsdFtDT05GSUddO1xuICAgICAgICAgICAgaWYgKCFkZWxlZ2F0ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBQYWNrYWdlICcke2NvbmZpZy5kZWxlZ2F0ZX0nIGhhcyBiZWVuIGZvdW5kLCBidXQgaXQncyBub3QgYSBuYW1lci4gU2V0IHBhY2thZ2UuanNvbiNwYXJjZWwtbmFtZXItcmV3cml0ZTpjaGFpbiB0byBzZXQgYSBkZWxlZ2F0ZSBuYW1lciAoXCJAcGFyY2VsL25hbWVyLWRlZmF1bHRcIiBieSBkZWZhdWx0KWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWc7XG4gICAgfSxcblxuICAgIGFzeW5jIHJld3JpdGUoYnVuZGxlOiB7IGlkOiBzdHJpbmcgfSwgYnVuZGxlR3JhcGg6IHt9LCBvcHRpb25zOiB7fSwgc3VwZXJOYW1lOiBzdHJpbmcsIGxvZ2dlcikge1xuICAgICAgICBjb25zdCBydWxlID0gdGhpcy5jb25maWcuc2VsZWN0UnVsZShzdXBlck5hbWUpO1xuICAgICAgICBpZiAoIXJ1bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlck5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYnVuZGxlSGFzaCA9ICcnO1xuXG4gICAgICAgIGlmIChvcHRpb25zLm1vZGUgIT09ICdkZXZlbG9wbWVudCcgfHwgdGhpcy5jb25maWcuZGV2ZWxvcG1lbnRIYXNoaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcudXNlUGFyY2VsSGFzaCkge1xuICAgICAgICAgICAgICAgIGJ1bmRsZUhhc2ggPSBidW5kbGUuaGFzaFJlZmVyZW5jZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGFzc2V0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGJ1bmRsZS50cmF2ZXJzZUFzc2V0cygoYXNzZXQpID0+IGFzc2V0cy5wdXNoKGFzc2V0KSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFzc2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0LmZpbGVQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlSGFzaCA9IGF3YWl0IG1kNUZyb21GaWxlUGF0aChhc3NldC5mcywgYXNzZXQuZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaC51cGRhdGUoW2Fzc2V0LmZpbGVQYXRoLCBmaWxlSGFzaF0uam9pbignOicpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJ1bmRsZUhhc2ggPSBoYXNoLmRpZ2VzdCgnaGV4Jykuc3Vic3RyKDAsIDYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgd2UgbmVlZCBoYXNoaW5nIC0gcmVtb3ZlIGJ1bmRsZSBoYXNoIHBsYWNlaG9sZGVyXG4gICAgICAgIGlmIChidW5kbGVIYXNoICYmIGJ1bmRsZS5oYXNoUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBzdXBlck5hbWUgPSBzdXBlck5hbWUucmVwbGFjZShcIi5cIiArIGJ1bmRsZS5oYXNoUmVmZXJlbmNlLCBcIlwiKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmV3cml0ZSA9IHN1cGVyTmFtZVxuICAgICAgICAgICAgLnJlcGxhY2UocnVsZS50ZXN0LCBydWxlLnRvKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3soLj8paGFzaCguPyl9LywgYnVuZGxlSGFzaC5sZW5ndGggPiAwID8gYCQxJHtidW5kbGVIYXNofSQyYCA6ICcnKTtcblxuICAgICAgICBpZiAodGhpcy5jb25maWcuc2lsZW50ICE9PSB0cnVlKVxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBSZXdyaXRlICR7c3VwZXJOYW1lfSAtPiAke3Jld3JpdGV9YFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJld3JpdGU7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsTUFBTSxDQUFDQyxHQUFQLENBQVcsc0JBQVgsQ0FBZixDLENBRUE7O2VBQ2UsSUFBSUMsYUFBSixDQUFVO0VBQ3JCQyxNQUFNLEVBQUVDLGNBQUEsR0FBU0MsU0FESTtFQUVyQkMsUUFBUSxFQUFFLElBRlc7O0VBSXJCLE1BQU1DLElBQU4sQ0FBV0MsSUFBWCxFQUF5RjtJQUFBOztJQUNyRixNQUFNTCxNQUFNLEdBQUcsS0FBS00sWUFBTCxDQUFrQkQsSUFBSSxDQUFDRSxPQUFMLENBQWFDLFdBQS9CLEVBQTRDSCxJQUFJLENBQUNFLE9BQUwsQ0FBYUUsY0FB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